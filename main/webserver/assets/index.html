<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AS608 Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <h1>AS608 <span>Dashboard</span></h1>
            <div class="connection-status">
                <span id="ws-status" class="status-dot disconnected"></span>
                <span id="ws-text">Disconnected</span>
            </div>
        </div>
    </header>

    <!-- Event Badge - Real-time Status Display -->
    <div class="event-banner" id="event-banner">
        <span class="event-text" id="event-text">S·∫µn s√†ng</span>
    </div>

    <!-- Main Container -->
    <main class="container">
        <!-- Status Card -->
        <section class="card">
            <h2>Tr·∫°ng th√°i</h2>
            <div class="status-grid">
                <div class="status-item">
                    <span class="status-label">C·∫£m bi·∫øn</span>
                    <span class="status-value" id="sensor-status">--</span>
                </div>
                <div class="status-item">
                    <span class="status-label">ƒê√£ ƒëƒÉng k√Ω</span>
                    <span class="status-value" id="finger-count">0</span>
                </div>
                <div class="status-item">
                    <span class="status-label">T·ªëi ƒëa</span>
                    <span class="status-value" id="library-size">162</span>
                </div>
                <div class="status-item">
                    <span class="status-label">ID ti·∫øp</span>
                    <span class="status-value" id="next-id">0</span>
                </div>
            </div>
            <div class="state-display">
                <span class="state-label">Ch·∫ø ƒë·ªô:</span>
                <span class="state-badge" id="state-badge">CH·ªú</span>
            </div>
        </section>

        <!-- Actions Card -->
        <section class="card">
            <h2>Thao t√°c</h2>
            <div class="action-grid">
                <button class="btn btn-primary" id="btn-enroll">
                    ‚ûï Th√™m m·ªõi
                </button>
                <button class="btn btn-secondary" id="btn-match">
                    üîç Ki·ªÉm tra
                </button>
            </div>
            <div class="action-grid">
                <button class="btn btn-warning" id="btn-delete">
                    üóëÔ∏è X√≥a ID
                </button>
                <button class="btn btn-danger" id="btn-clear">
                    ‚ö†Ô∏è X√≥a t·∫•t c·∫£
                </button>
            </div>
            <button class="btn btn-cancel" id="btn-cancel" disabled>
                H·ªßy
            </button>
        </section>

        <!-- Volume Control -->
        <section class="card">
            <h2>√Çm l∆∞·ª£ng</h2>
            <div class="volume-control">
                <input type="range" id="volume-slider" min="0" max="100" value="50">
                <span class="volume-value" id="volume-value">50%</span>
            </div>
        </section>

        <!-- OTA Update -->
        <section class="card">
            <h2>C·∫≠p nh·∫≠t firmware</h2>
            <div class="ota-info">
                <div class="status-item">
                    <span class="status-label">Phi√™n b·∫£n</span>
                    <span class="status-value" id="ota-version">--</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Tr·∫°ng th√°i</span>
                    <span class="status-value" id="ota-state">--</span>
                </div>
            </div>
            <div class="ota-upload">
                <input type="file" id="ota-file" accept=".bin" hidden>
                <button class="btn btn-secondary" id="btn-ota-select">
                    üìÅ Ch·ªçn file .bin
                </button>
                <span class="file-name" id="ota-filename">Ch∆∞a ch·ªçn file</span>
            </div>
            <button class="btn btn-primary" id="btn-ota-upload" disabled>
                üöÄ C·∫≠p nh·∫≠t firmware
            </button>
            <div class="ota-progress" id="ota-progress-container" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="ota-progress-bar"></div>
                </div>
                <span class="progress-text" id="ota-progress-text">0%</span>
            </div>
        </section>

        <!-- Fingerprint List -->
        <section class="card">
            <div class="card-header">
                <h2>Danh s√°ch v√¢n tay</h2>
                <button class="btn btn-small" id="btn-refresh">L√†m m·ªõi</button>
            </div>
            <ul class="finger-list" id="finger-list">
                <li class="empty-state">Ch∆∞a c√≥ v√¢n tay n√†o</li>
            </ul>
        </section>
    </main>

    <!-- Delete ID Modal -->
    <div class="modal" id="delete-modal">
        <div class="modal-content">
            <h3>X√≥a v√¢n tay</h3>
            <p>Nh·∫≠p ID c·∫ßn x√≥a:</p>
            <input type="number" id="delete-id-input" min="0" max="161" placeholder="ID (0-161)">
            <div class="modal-actions">
                <button class="btn btn-secondary" id="delete-modal-cancel">H·ªßy</button>
                <button class="btn btn-danger" id="delete-modal-confirm">X√≥a</button>
            </div>
        </div>
    </div>

    <!-- Rename Modal -->
    <div class="modal" id="rename-modal">
        <div class="modal-content">
            <h3>ƒê·∫∑t t√™n v√¢n tay</h3>
            <p>ID: <span id="rename-id-display">0</span></p>
            <input type="text" id="rename-input" maxlength="31" placeholder="Nh·∫≠p t√™n (VD: Nguyen Van A)">
            <div class="modal-actions">
                <button class="btn btn-secondary" id="rename-modal-cancel">B·ªè qua</button>
                <button class="btn btn-primary" id="rename-modal-confirm">L∆∞u</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal" id="confirm-modal">
        <div class="modal-content">
            <h3 id="confirm-title">X√°c nh·∫≠n</h3>
            <p id="confirm-message">B·∫°n c√≥ ch·∫Øc ch·∫Øn?</p>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="confirm-cancel">H·ªßy</button>
                <button class="btn btn-danger" id="confirm-ok">X√°c nh·∫≠n</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-message" id="toast-message"></span>
    </div>

    <!-- Scripts -->
    <script src="ws.js"></script>
    <script src="api.js"></script>
    <script src="app.js"></script>
</body>
</html>
